{{< /layout}}

{{$ title}}Add New Interaction{{/ title}}

{{$ content}}
<h2>Add New Interaction</h2>

<form action="/interactions" method="POST">
    
    <div>
        <label for="contactId">Contact:</label>
        <select id="contactId" name="contactId" required>
            {{# contactOptions}}
                <option {{# selected}}selected{{/ selected}} value="{{value}}">{{text}}</option>
            {{/ contactOptions}}
        </select>
    </div>

    <div>
        <label for="type">Type:</label>
        <select id="type" name="type" required>
            {{# typeOptions}}
                <option {{# selected}}selected{{/ selected}} value="{{value}}">{{text}}</option>
            {{/ typeOptions}}
        </select>
    </div>

    <div>
        <label for="start">Start Time:</label>
        <input type="datetime-local" id="started" name="started" value="{{started}}" required>
    </div>

    <div>
        <label for="end">End Time:</label>
        <input type="datetime-local" id="ended" name="ended" value="{{ended}}">
    </div>

    <div>
        <label for="summary">Summary:</label>
        <textarea id="summary" name="summary" rows="4" cols="50">{{summary}}</textarea>
    </div>

    <div>
        <label for="location">Location:</label>
        <input type="text" id="location" name="location" value="{{location}}">
    </div>

    <div class="form-actions">
        <input class="primary-button" type="submit" value="Add Interaction">
    </div>
</form>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var startInput = document.getElementById('started');
        var endInput = document.getElementById('ended');

        startInput.addEventListener('change', function() {
            if (endInput.value < startInput.value) {
                endInput.value = startInput.value;
            }
        });

        endInput.addEventListener('change', function() {
            if (endInput.value < startInput.value) {
                alert('End time cannot be before start time');
                endInput.value = startInput.value;
            }
        });
    });
</script>
{{/ content}}

{{/ /layout}}